<!DOCTYPE html>
<html lang="ja">

<head>
  <meta name="robots" content="noindex">
  <meta name="robots" content="noffollow">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>äº”ç·šè­œéŸ³ç¬¦å½“ã¦ã‚²ãƒ¼ãƒ </title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .game-container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      padding: 40px;
      max-width: 800px;
      width: 100%;
      text-align: center;
    }

    h1 {
      color: #333;
      margin-bottom: 30px;
      font-size: 2.5rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .score-board {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .score-item {
      font-size: 1.2rem;
      font-weight: bold;
      color: #555;
    }

    .staff-container {
      margin: 40px 0;
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .staff {
      position: relative;
      width: 100%;
      height: 280px;
      margin: 20px 0;
    }

    .staff-line {
      position: absolute;
      width: 100%;
      height: 2px;
      background-color: black;
    }

    /* äº”ç·šè­œ */
    /* é«˜ã„é«˜ã„ã‚½ */
    .staff-line:nth-child(1) {
      top: 20px;
      background-color: lightblue;
      width: 50px;
      height: 2px;
      left: 175px;
      transform: translateY(-50%);
    }

    /* é«˜ã„é«˜ã„ãƒŸ */
    .staff-line:nth-child(2) {
      top: 40px;
      background-color: lightblue;
      width: 50px;
      height: 2px;
      left: 175px;
      transform: translateY(-50%);
    }

    /* é«˜ã„é«˜ã„ãƒ‰ */
    .staff-line:nth-child(3) {
      top: 60px;
      background-color: lightblue;
      width: 50px;
      height: 2px;
      left: 175px;
      transform: translateY(-50%);
    }

    /* é«˜ã„ãƒ© */
    .staff-line:nth-child(4) {
      top: 80px;
      background-color: lightblue;
      width: 50px;
      height: 2px;
      left: 175px;
      transform: translateY(-50%);
    }

    /* é«˜ã„ãƒ•ã‚¡ */
    .staff-line:nth-child(5) {
      top: 100px;
    }

    /* é«˜ã„ãƒ¬ */
    .staff-line:nth-child(6) {
      top: 120px;
    }

    /* ã‚· */
    .staff-line:nth-child(7) {
      top: 140px;
    }

    /* ã‚½ */
    .staff-line:nth-child(8) {
      top: 160px;
    }

    /* ãƒŸ */
    .staff-line:nth-child(9) {
      top: 180px;
    }

    /* ãƒ‰ */
    .staff-line:nth-child(10) {
      top: 200px;
      background-color: lightblue;
      width: 50px;
      height: 2px;
      left: 175px;
      transform: translateY(-50%);
    }

    /* ä½ã„ãƒ© */
    .staff-line:nth-child(11) {
      top: 220px;
      background-color: lightblue;
      width: 50px;
      height: 2px;
      left: 175px;
      transform: translateY(-50%);
    }

    /* ä½ã„ãƒ•ã‚¡ */
    .staff-line:nth-child(12) {
      top: 240px;
      background-color: lightblue;
      width: 50px;
      height: 2px;
      left: 175px;
      transform: translateY(-50%);
    }

    /* ä½ã„ãƒ¬ */
    .staff-line:nth-child(13) {
      top: 260px;
      background-color: lightblue;
      width: 50px;
      height: 2px;
      left: 175px;
      transform: translateY(-50%);
    }

    .clef {
      position: absolute;
      left: 20px;
      font-size: 120px;
      color: #333;
      line-height: 1;
    }

    .treble-clef {
      top: 70px;
    }

    .bass-clef {
      top: 90px;
    }

    .note {
      position: absolute;
      width: 30px;
      /* éŸ³ç¬¦ã®å¹… */
      height: 20px;
      /* éŸ³ç¬¦ã®é«˜ã• */
      background-color: #333;
      border-radius: 50%;
      left: 200px;
      transform: translateX(-50%) translateY(-50%);
      transition: all 0.3s ease;
    }

    /*ã€€æ——ä¸è¦
    .note::before {
      content: '';
      position: absolute;
      width: 2px;
      height: 80px;
      background-color: #333;
      right: -1px;
      top: -60px;
    }
*/

    .ledger-line {
      position: absolute;
      width: 50px;
      height: 2px;
      background-color: #333;
      left: 175px;
      transform: translateY(-50%);
    }

    .options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      margin: 30px 0;
    }

    .option-btn {
      padding: 15px 20px;
      font-size: 1.2rem;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
    }

    .option-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(79, 172, 254, 0.4);
    }

    .option-btn.correct {
      background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
      animation: pulse 0.6s ease-in-out;
    }

    .option-btn.incorrect {
      background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
      animation: shake 0.6s ease-in-out;
    }

    @keyframes pulse {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.05);
      }
    }

    @keyframes shake {

      0%,
      100% {
        transform: translateX(0);
      }

      25% {
        transform: translateX(-5px);
      }

      75% {
        transform: translateX(5px);
      }
    }

    .controls {
      margin-top: 30px;
    }

    .btn {
      padding: 15px 30px;
      font-size: 1.1rem;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin: 0 10px;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .feedback {
      margin-top: 20px;
      padding: 15px;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: bold;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .feedback.correct {
      background: #d4edda;
      color: #155724;
      border: 2px solid #c3e6cb;
    }

    .feedback.incorrect {
      background: #f8d7da;
      color: #721c24;
      border: 2px solid #f5c6cb;
    }

    .selector {
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    .selector select {
      padding: 10px 15px;
      font-size: 1rem;
      border: 2px solid #ddd;
      border-radius: 8px;
      background: white;
      cursor: pointer;
    }

    @media (max-width: 600px) {
      .game-container {
        padding: 20px;
      }

      h1 {
        font-size: 2rem;
      }

      .clef {
        font-size: 80px;
        left: 10px;
      }

      .note {
        left: 150px;
      }

      .ledger-line {
        left: 125px;
      }
    }
  </style>
</head>

<body>
  <div class="game-container">
    <h1>ğŸµ éŸ³ç¬¦å½“ã¦ç·´ç¿’ ğŸµ</h1>

    <div class="score-board">
      <div class="score-item">ã‚¹ã‚³ã‚¢: <span id="score">0</span></div>
      <div class="score-item">å•é¡Œæ•°: <span id="total">0</span></div>
      <div class="score-item">æ­£ç­”ç‡: <span id="accuracy">0%</span></div>
    </div>

    <div class="selector">
      <div>
        <label for="clef">è¨˜å·: </label>
        <select id="clef" onchange="changeClef()">
          <option value="treble">ãƒˆéŸ³è¨˜å·</option>
          <option value="bass">ãƒ˜éŸ³è¨˜å·</option>
        </select>
      </div>
      <label for="difficulty">é›£æ˜“åº¦: </label>
      <select id="difficulty" onchange="changeDifficulty()">
        <option value="basic"></option>
        <option value="extended"></option>
        <option value="advanced"></option>
      </select>
    </div>

    <div class="staff-container">
      <div class="staff">
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div class="staff-line"></div>
        <div id="treble-clef" class="clef treble-clef">ğ„</div>
        <div id="bass-clef" class="clef bass-clef" style="display: none;">ğ„¢</div>
        <div id="note" class="note"></div>
        <div id="ledger-line" class="ledger-line" style="display: none;"></div>
      </div>
    </div>

    <div id="options" class="options">
      <!-- ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ãŒã“ã“ã«å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ -->
    </div>

    <div id="feedback" class="feedback" style="display: none;">
    </div>

    <div class="controls">
      <button class="btn btn-primary" onclick="newQuestion()">æ¬¡ã®å•é¡Œ</button>
      <button class="btn btn-primary" onclick="resetGame()">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
  </div>

  <script>
    // éŸ³ç¬¦ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆä½ç½®ã¨åå‰ï¼‰- äº”ç·šè­œã®å®Ÿéš›ã®ä½ç½®ã«åˆã‚ã›ã¦èª¿æ•´
    // positionã¯éŸ³ç¬¦ã®ä¸­å¿ƒã®ä½ç½®
    const notes = {
      treble: {
        basic: [
          { name: 'ãƒ‰', position: 200, ledger: true, ledgerPos: 200 }, // ä¸‹ç¬¬1ç·š (C4)
          { name: 'ãƒ¬', position: 190, ledger: false }, // ç¬¬1ç·šã¨ç¬¬2ç·šã®é–“ (D4)
          { name: 'ãƒŸ', position: 180, ledger: false }, // ç¬¬1ç·šä¸Š (E4)
          { name: 'ãƒ•ã‚¡', position: 170, ledger: false }, // ç¬¬1ç·šã¨ç¬¬2ç·šã®é–“ (F4)
          { name: 'ã‚½', position: 160, ledger: false }, // ç¬¬2ç·šä¸Š (G4)
          { name: 'ãƒ©', position: 150, ledger: false }, // ç¬¬3ç·šä¸Š (A4)
          { name: 'ã‚·', position: 140, ledger: false }, // ç¬¬3ç·šã¨ç¬¬4ç·šã®é–“ (B4)
          { name: 'é«˜ã„ãƒ‰', position: 130, ledger: false }, // ç¬¬4ç·šä¸Š (C5)
          { name: 'é«˜ã„ãƒ¬', position: 120, ledger: false }, // ç¬¬4ç·šã¨ç¬¬5ç·šã®é–“ (D5)
          { name: 'é«˜ã„ãƒŸ', position: 110, ledger: false }, // ç¬¬5ç·šä¸Š (E5)
        ],
        extended: [
          { name: 'é«˜ã„ãƒ•ã‚¡', position: 100, ledger: false }, // ç¬¬5ç·šã®ä¸Š (F5)
          { name: 'é«˜ã„ã‚½', position: 90, ledger: false }, // ä¸Šç¬¬1ç·š (G5)
          { name: 'é«˜ã„ãƒ©', position: 80, ledger: true, ledgerPos: 80 }, // ä¸Šç¬¬1ç·š (G5)
          { name: 'é«˜ã„ã‚·', position: 70, ledger: false }, // ä¸Šç¬¬1ç·š (G5)
          { name: 'é«˜ã„é«˜ã„ãƒ‰', position: 60, ledger: true, ledgerPos: 60 }, // ä¸Šç¬¬1ç·š (G5)
          { name: 'é«˜ã„é«˜ã„ãƒ¬', position: 50, ledger: false }, // ä¸Šç¬¬1ç·š (G5)
          { name: 'é«˜ã„é«˜ã„ãƒŸ', position: 40, ledger: true, ledgerPos: 40 }, // ä¸Šç¬¬1ç·š (G5)
          { name: 'é«˜ã„é«˜ã„ãƒ•ã‚¡', position: 30, ledger: false }, // ä¸Šç¬¬1ç·š (G5)
          { name: 'é«˜ã„é«˜ã„ã‚½', position: 20, ledger: true, ledgerPos: 20 }, // ä¸Šç¬¬1ç·š (G5)
          { name: 'é«˜ã„é«˜ã„ãƒ©', position: 10, ledger: false }, // ä¸Šç¬¬1ç·š (G5)
        ],
        advanced: [
          { name: 'ä½ã„ãƒ‰', position: 270, ledger: false }, // ä¸‹ç¬¬3ç·šã¨ä¸‹ç¬¬2ç·šã®é–“ (G3)
          { name: 'ä½ã„ãƒ¬', position: 260, ledger: true, ledgerPos: 260 }, // ä¸‹ç¬¬3ç·šã¨ä¸‹ç¬¬2ç·šã®é–“ (G3)
          { name: 'ä½ã„ãƒŸ', position: 250, ledger: false }, // ä¸‹ç¬¬3ç·šã¨ä¸‹ç¬¬2ç·šã®é–“ (G3)
          { name: 'ä½ã„ãƒ•ã‚¡', position: 240, ledger: true, ledgerPos: 240 }, // ä¸‹ç¬¬3ç·šã¨ä¸‹ç¬¬2ç·šã®é–“ (G3)
          { name: 'ä½ã„ã‚½', position: 230, ledger: false }, // ä¸‹ç¬¬3ç·šã¨ä¸‹ç¬¬2ç·šã®é–“ (G3)
          { name: 'ä½ã„ãƒ©', position: 220, ledger: true, ledgerPos: 220 }, // ä¸‹ç¬¬2ç·š (A3)
          { name: 'ä½ã„ã‚·', position: 210, ledger: false }, // ä¸‹ç¬¬1ç·š (B3)
        ]
      },
      bass: {
        basic: [
          { name: 'ä½ã„ãƒ‰', position: 150, ledger: false },
          { name: 'ä½ã„ãƒ¬', position: 140, ledger: false },
          { name: 'ä½ã„ãƒŸ', position: 130, ledger: false },
          { name: 'ä½ã„ãƒ•ã‚¡', position: 120, ledger: false },
          { name: 'ä½ã„ã‚½', position: 110, ledger: false },
          { name: 'ä½ã„ãƒ©', position: 100, ledger: false },
          { name: 'ä½ã„ã‚·', position: 90, ledger: false },
          { name: 'ãƒ‰', position: 80, ledger: true, ledgerPos: 80 }
        ],
        extended: [
          { name: 'ä½ã„ä½ã„ãƒ‰', position: 220, ledger: true, ledgerPos: 220 },
          { name: 'ä½ã„ä½ã„ãƒ¬', position: 210, ledger: false },
          { name: 'ä½ã„ä½ã„ãƒŸ', position: 200, ledger: true, ledgerPos: 200 },
          { name: 'ä½ã„ä½ã„ãƒ•ã‚¡', position: 190, ledger: false },
          { name: 'ä½ã„ä½ã„ã‚½', position: 180, ledger: false },
          { name: 'ä½ã„ä½ã„ãƒ©', position: 170, ledger: false },
          { name: 'ä½ã„ä½ã„ã‚·', position: 160, ledger: false },
        ]
      }
    };

    let currentNote = null;
    let score = 0;
    let totalQuestions = 0;
    let currentClef = 'treble';
    let currentDifficulty = 'basic';
    let gameState = 'waiting'; // 'waiting', 'answered'

    function changeClef() {
      currentClef = document.getElementById('clef').value;

      const difficultySelect = document.getElementById('difficulty');
      difficultySelect.innerHTML = ''; // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªã‚¢

      if (currentClef === 'treble') {
        difficultySelect.innerHTML = `
              <option value="basic">åŸºæœ¬ (ãƒ‰ã€œé«˜ã„ãƒŸ)</option>
              <option value="extended">é«˜ã„ (é«˜ã„ãƒ•ã‚¡ã€œé«˜ã„é«˜ã„ãƒ©)</option>
              <option value="advanced">ä½ã„ (ä½ã„ãƒ‰ã€œä½ã„ã‚·)</option>
          `;
        currentDifficulty = 'basic';
      } else {
        difficultySelect.innerHTML = `
              <option value="basic">åŸºæœ¬ (ä½ã„ãƒ‰ã€œãƒ‰)</option>
              <option value="extended">ä½ã„ (ä½ã„ä½ã„ãƒ‰ã€œä½ã„ä½ã„ã‚·)</option>
          `;
        currentDifficulty = 'basic';
      }

      newQuestion();
    }

    function changeDifficulty() {
      currentDifficulty = document.getElementById('difficulty').value;
      newQuestion();
    }

    function getRandomNote() {
      const availableNotes = notes[currentClef][currentDifficulty];
      return availableNotes[Math.floor(Math.random() * availableNotes.length)];
    }

    function generateWrongOptions(correctNote, count = 3) {
      const availableNotes = notes[currentClef][currentDifficulty];
      const wrongOptions = [];

      while (wrongOptions.length < count) {
        const randomNote = availableNotes[Math.floor(Math.random() * availableNotes.length)];
        if (randomNote.name !== correctNote.name && !wrongOptions.includes(randomNote.name)) {
          wrongOptions.push(randomNote.name);
        }
      }

      return wrongOptions;
    }

    function displayNote(note) {
      const noteElement = document.getElementById('note');
      const ledgerLine = document.getElementById('ledger-line');

      noteElement.style.top = note.position + 'px';

      if (note.ledger) {
        ledgerLine.style.display = 'block';
        ledgerLine.style.top = note.ledgerPos + 'px';
      } else {
        ledgerLine.style.display = 'none';
      }
    }

    function displayClef() {
      const trebleClef = document.getElementById('treble-clef');
      const bassClef = document.getElementById('bass-clef');

      if (currentClef === 'treble') {
        trebleClef.style.display = 'block';
        bassClef.style.display = 'none';
      } else {
        trebleClef.style.display = 'none';
        bassClef.style.display = 'block';
      }
    }

    function createOptions(correctNote) {
      const optionsContainer = document.getElementById('options');
      const wrongOptions = generateWrongOptions(correctNote, 3);
      const allOptions = [correctNote.name, ...wrongOptions];

      // ã‚·ãƒ£ãƒƒãƒ•ãƒ«
      for (let i = allOptions.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [allOptions[i], allOptions[j]] = [allOptions[j], allOptions[i]];
      }

      optionsContainer.innerHTML = '';

      allOptions.forEach(option => {
        const button = document.createElement('button');
        button.className = 'option-btn';
        button.textContent = option;
        button.onclick = () => selectAnswer(option, correctNote.name);
        optionsContainer.appendChild(button);
      });
    }

    function selectAnswer(selectedAnswer, correctAnswer) {
      if (gameState === 'answered') return;

      gameState = 'answered';
      totalQuestions++;

      const buttons = document.querySelectorAll('.option-btn');
      const feedback = document.getElementById('feedback');

      buttons.forEach(button => {
        button.disabled = true;
        if (button.textContent === correctAnswer) {
          button.classList.add('correct');
        } else if (button.textContent === selectedAnswer && selectedAnswer !== correctAnswer) {
          button.classList.add('incorrect');
        }
      });

      if (selectedAnswer === correctAnswer) {
        score++;
        feedback.textContent = 'æ­£è§£ï¼ğŸ‰ ç´ æ™´ã‚‰ã—ã„ã§ã™ï¼';
        feedback.className = 'feedback correct';
      } else {
        feedback.textContent = `ä¸æ­£è§£ ğŸ˜” æ­£è§£ã¯ã€Œ${correctAnswer}ã€ã§ã—ãŸã€‚`;
        feedback.className = 'feedback incorrect';
      }

      feedback.style.display = 'flex';
      updateScore();

      // 2ç§’å¾Œã«æ–°ã—ã„å•é¡Œã‚’å‡ºã™
      setTimeout(() => {
        newQuestion();
      }, 2000);
    }

    function updateScore() {
      document.getElementById('score').textContent = score;
      document.getElementById('total').textContent = totalQuestions;
      const accuracy = totalQuestions > 0 ? Math.round((score / totalQuestions) * 100) : 0;
      document.getElementById('accuracy').textContent = accuracy + '%';
    }

    function newQuestion() {
      gameState = 'waiting';
      currentNote = getRandomNote();

      displayClef();
      displayNote(currentNote);
      createOptions(currentNote);

      // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’éš ã™
      document.getElementById('feedback').style.display = 'none';

      // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
      const buttons = document.querySelectorAll('.option-btn');
      buttons.forEach(button => {
        button.disabled = false;
        button.classList.remove('correct', 'incorrect');
      });
    }

    function resetGame() {
      score = 0;
      totalQuestions = 0;
      updateScore();
      newQuestion();
    }

    // åˆæœŸåŒ–
    window.onload = function () {
      updateScore();
      changeClef();
    };
  </script>
</body>

</html>